/* Label Slide (leSlide) | Version 1.3 | http://wesleytodd.com/ */
(function(a){a.leSlide=function(c,b){var d=this;d.$el=a(c);d.el=c;d.$el.data("leSlide",d);d.init=function(){d.options=a.extend({},a.leSlide.defaultOptions,b);if(typeof d.options.wrapper=="function"){d.$wrapper=d.options.wrapper.call(this,d.$el).addClass(d.options.wrapperClass)}else{d.$wrapper=d.$el.wrap('<div class="'+d.options.wrapperClass+'" />').closest("."+d.options.wrapperClass)}if(typeof d.options.label=="function"){d.$label=d.options.label.call(this,d.$el).attr("for",d.$el.attr("id"))}else{d.$label=a("<label>"+d.$el.attr("placeholder")+"</label>").attr("for",d.$el.attr("id"))}d.$el.removeAttr("placeholder");d.$wrapper.prepend(d.$label);if(d.options.animate){d.$label.css({"-moz-transition":"none","-webkit-transition":"none","-o-transition":"none","-ms-transition":"none",transition:"none"})}d.updateWidths();d.attachEventHandler(d.el);d.eventHandler(a.Event())};d.updateWidths=function(){console.log("here");var e=d.$label.clone().css({display:"inline",width:"auto"});d.$label.after(e);d.labelInlineWidth=e.width();e.remove();d.inputWidth=d.$el.width();d.baseTextIndent=d.inputWidth-d.labelInlineWidth-d.options.textIndentOffset};d.attachEventHandler=function(e){a(e).on("focus blur keyup",function(f){d.eventHandler(f)});a(window).on("resize",function(){clearTimeout(d.resizeTimer);d.resizeTimer=setTimeout(function(){d.updateWidths()},20)});a(e).on("unmaskreplace",function(g,f){d.el=f.get(0);d.$el=a(f);d.$el.data("leSlide",d);d.attachEventHandler(f)})};d.eventHandler=function(h){var g=0;if(h.type=="focus"){if(d.$el.val()==""){g=d.baseTextIndent}else{g=d.$label.css("text-indent");g=g-d.options.textIndentOffset}d.$el.closest("."+d.options.wrapperClass).addClass(d.options.focusClass)}else{if(h.type=="blur"){if(d.$el.val()!=""){g=d.$label.css("text-indent");g=g-d.options.textIndentOffset}d.$el.closest("."+d.options.wrapperClass).removeClass(d.options.focusClass)}else{if(d.$el.val()!=""){var i=a("<span />").html(d.$el.val());d.$el.after(i);var f=i.width();i.remove();if(f>d.inputWidth-d.labelInlineWidth-d.options.widthOffset-d.options.textIndentOffset){g=d.baseTextIndent+(f/d.options.textIndentMultiplier)}else{g=d.baseTextIndent}}}}if(!d.options.animate){d.$label.css("text-indent",g)}else{d.$label.stop().animate({"text-indent":g},d.options.animateDuration,d.options.animateEasing,d.options.animateComplete)}};d.init()};a.leSlide.defaultOptions={wrapper:false,wrapperClass:"leSlide-wrap",label:false,focusClass:"field-focus",animate:true,animateEasing:"swing",animateDuration:500,animateComplete:function(){},widthOffset:35,textIndentMultiplier:2.66,textIndentOffset:10};a.fn.leSlide=function(b){return this.each(function(){(new a.leSlide(this,b))})}})(jQuery);